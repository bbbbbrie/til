{% extends "til_base.html" %}
{% block title %}Brie Carranza: TIL{% endblock %}
{% block extra_head %}
<link href="https://gitlab.com/brie" rel="me">
<link href="https://github.com/bbbbbrie" rel="me">
<link href="https://brie.dev/" rel="me">
<style>
input[type=search] {
    padding: .25em;
    font-size: 0.9rem;
    width: 60%;
}

a.howdy {
    box-sizing: border-box;
    color: #fff;
    background-color: #007bff;
    font-weight: 400;
    cursor: pointer;
    text-align: center;
    vertical-align: middle;
    padding: .5em 0.8em;
    font-size: 0.9rem;
    line-height: 1;   

}

input[type=submit] {
    box-sizing: border-box;
    color: #fff;
    background-color: #007bff;
    font-weight: 400;
    cursor: pointer;
    text-align: center;
    vertical-align: middle;
    padding: .5em 0.8em;
    font-size: 0.9rem;
    line-height: 1;   
}
</style>
{% endblock %}

{% block body %}
{% set til_count = sql("select count(*) from TIL", database="tils")[0][0] %}

<!-- START FLOWBITE NAVBAR -->
<nav class="bg-white px-2 sm:px-4 py-2.5 dark:bg-gray-900  w-full z-20 top-0 left-0 border-b border-gray-200 dark:border-gray-600">
  <div class="container flex flex-wrap items-center justify-between mx-auto">
  <a href="https://til.brie.dev/" class="flex items-center">
       <img src="/static/svg/lotus.svg" class="h-6 mr-3 sm:h-9" alt="Lotus flower outline"> 
      <span class="self-center text-2xl font-semibold whitespace-nowrap dark:text-white">TIL</span>
  </a>
 
  <!-- 
  <div class="flex md:order-2">
      <button type="button" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-3 md:mr-0 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">BROWSE ALL TILs</button>
      <button data-collapse-toggle="navbar-sticky" type="button" class="inline-flex items-center p-2 text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="navbar-sticky" aria-expanded="false">
        <span class="sr-only">Open main menu</span>
        <svg class="w-6 h-6" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg>
    </button>
  </div>
 -->
 
  <div class="items-center justify-between hidden w-full md:flex md:w-auto md:order-1" id="navbar-sticky">
    <ul class="flex flex-col p-4 mt-4 border border-gray-100 rounded-lg bg-gray-50 md:flex-row md:space-x-8 md:mt-0 md:text-sm md:font-medium md:border-0 md:bg-white dark:bg-gray-800 md:dark:bg-gray-900 dark:border-gray-700">
      <li>
        <a href="#" class="block py-2 pl-3 pr-4 text-white bg-blue-700 rounded md:bg-transparent md:text-blue-700 md:p-0 dark:text-white" aria-current="page">HOME</a>
      </li>
      <li>
        <a href="/all" class="block py-2 pl-3 pr-4 text-gray-700 rounded hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0 md:dark:hover:text-white dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700">ALL</a>
      </li>
    </ul>
  </div>
  </div>
</nav>
<!-- END FLOWBITE NAVBAR -->


<main class="relative">
  <div class="container mx-auto mt-4">
<div  class="grid grid-flow-row auto-rows-max py-10 " id="welcome-brie">

<p>
<h1  class="mb-4 text-5xl font-extrabold text-gray-900 md:text-5xl lg:text-6xl">    Welcome to things <mark class="px-2 text-white bg-blue-600 rounded dark:bg-blue-500">Brie</mark> learned!</h1>
</p>

<p>The structure for this site is based on <a class="font-medium text-blue-600 dark:text-blue-500 hover:underline" href="https://til.simonwillison.net/">Simon Willison's</a> TIL project. I forked his work and then added Tailwind, Flowbite, <a href="https://wickedblocks.dev/groups/footer/">Wickedblocks</a> and lots of emoji. 
    The source for these snippets can be found in the <a class="font-medium text-blue-600 dark:text-blue-500 hover:underline" href="https://github.com/bbbbbrie/til">bbbbbrie/til</a> repository. You may also enjoy <a class="font-medium text-blue-600 dark:text-blue-500 hover:underline" href="https://brie.dev/">my blog</a>.</p>
    <h3 class="text-3xl font-bold">Search TIL snippets</h3>
    <form action="/tils/search">
        <p>
            <input  type="search" name="q" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500" placeholder="✨ Search {{ til_count }} TILs">
            <input class="text-white bg-gradient-to-br from-fuchsia-600 to-pink-500 hover:bg-gradient-to-bl focus:ring-4 focus:outline-none focus:ring-pink-200 font-medium rounded-lg text-sm text-center mr-2 mb-2"   type="submit" value="✨ Search">
        </p>
    </form>
    <div id="browse-tils">
        <p><strong>Browse by topic:</strong>
        {% for row in sql("select topic, count(*) as num_tils from til group by topic order by topic", database="tils") %}
          <a class="font-medium text-blue-600  hover:underline"      title="{{ row.num_tils }} TIL{{ "s" if row.num_tils > 1 else "" }}" href="/{{ row.topic }}">{{ row.topic }}</a> {{ row.num_tils }}{% if not loop.last %} &middot;{% endif %}
        {% endfor %}
        </p>
    </div>
    <div id="recent-tils">
        <h2 class="text-4xl font-bold text-blue-500">Recent TILs</h2>
        {% for til in sql("select * from til order by created_utc desc limit 30", database="tils") %}
            <h5 class="font-light text-gray-500 "><span>
                <a class="bg-blue-100 hover:bg-blue-200 text-blue-800 text-sm font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-blue-200 dark:text-blue-800 dark:hover:bg-blue-300" href="/{{ til.topic }}">{{ til.topic }}</a></span> <a class="font-medium text-blue-600 dark:text-blue-500 hover:underline" href="/{{ til.topic }}/{{ til.slug }}">{{ til.title }}</a> - 
                {{ til.created[:10] }}</h5>
            {{ first_paragraph(til["html"]).replace("</p>", " &#8230; </p>")|safe }}
            <hr class="">
        {% endfor %}
    </div>
    <div id="browse-tils">
        <a class="howdy" href="/all" >Browse all {{ til_count }} TILs</a>
    </input>
    </div>
</div>
<hr>
</div>
</main>
{% endblock %}
